// Dados Scanntech - Nova Base VOLUMETRIA
// Gerado automaticamente em: 2025-11-26 19:28:44
// Fonte: BaseScanntech-VOLUMETRIA.xlsx
// Registros Nutrimental: 6118

const scanntechData = {
  totais: {
    vendas_total: 114931609.0515,
    volume_total_kg: 1581351.7497659998,
    preco_medio_kg: 117.48649195775543
  },
  
  por_regiao: {
    "SE": {
        "Vendas $": 58912456.9,
        "Volume (Kg)": 774090.18,
        "Pre\u00e7o (Kg)": 130.26,
        "Preco_Medio": 76.11
    },
    "SU": {
        "Vendas $": 20657086.18,
        "Volume (Kg)": 273935.86,
        "Pre\u00e7o (Kg)": 107.87,
        "Preco_Medio": 75.41
    },
    "NE": {
        "Vendas $": 18968165.03,
        "Volume (Kg)": 262917.98,
        "Pre\u00e7o (Kg)": 111.12,
        "Preco_Medio": 72.14
    },
    "CO": {
        "Vendas $": 11443468.9,
        "Volume (Kg)": 207268.27,
        "Pre\u00e7o (Kg)": 119.77,
        "Preco_Medio": 55.21
    },
    "NO": {
        "Vendas $": 4950432.04,
        "Volume (Kg)": 63139.45,
        "Pre\u00e7o (Kg)": 118.46,
        "Preco_Medio": 78.4
    }
},
  
  por_categoria: {
    "BARRA DE CEREAL": {
        "Vendas $": 103426218.88,
        "Volume (Kg)": 1516538.87,
        "Pre\u00e7o (Kg)": 106.01,
        "Preco_Medio": 68.2
    },
    "BARRA DE PROTE\u00cdNA": {
        "Vendas $": 11505390.18,
        "Volume (Kg)": 64812.88,
        "Pre\u00e7o (Kg)": 187.54,
        "Preco_Medio": 177.52
    }
},
  
  por_marca: {
    "NUTRY": {
        "Vendas $": 114931609.05,
        "Volume (Kg)": 1581351.75,
        "Pre\u00e7o (Kg)": 117.49,
        "Preco_Medio": 72.68
    }
},
  
  top_20_skus: {
    "CEREAL BARRA NUTRY MORANGO CHOC 22G": {
        "Vendas $": 9433955.59,
        "Volume (Kg)": 116458.41,
        "Pre\u00e7o (Kg)": 93.5,
        "Preco_Medio": 81.01
    },
    "CEREAL BARRA NUTRY BOLO DE CHOCOLATE 22G": {
        "Vendas $": 9190063.78,
        "Volume (Kg)": 116389.51,
        "Pre\u00e7o (Kg)": 91.11,
        "Preco_Medio": 78.96
    },
    "CEREAL BARRA NUTRY BANANA AVEIA MEL 22G": {
        "Vendas $": 8186117.44,
        "Volume (Kg)": 106137.58,
        "Pre\u00e7o (Kg)": 85.22,
        "Preco_Medio": 77.13
    },
    "CEREAL EM BARRA SAUD NUTRY AVELA/CHOCOLATE 22G": {
        "Vendas $": 7811452.23,
        "Volume (Kg)": 101382.44,
        "Pre\u00e7o (Kg)": 90.93,
        "Preco_Medio": 77.05
    },
    "CEREAL BARRA NUTRY MORANGO COM CHOCOLATE 24X22G": {
        "Vendas $": 6376693.85,
        "Volume (Kg)": 106554.12,
        "Pre\u00e7o (Kg)": 66.44,
        "Preco_Medio": 59.84
    },
    "CEREAL BARRA NUTRY BOLO DE CHOCOLATE 24X22G": {
        "Vendas $": 6150026.83,
        "Volume (Kg)": 103920.43,
        "Pre\u00e7o (Kg)": 66.45,
        "Preco_Medio": 59.18
    },
    "CEREAL BARRA NUTRY MORANGO CHOCOLATE 3X22G": {
        "Vendas $": 6134175.79,
        "Volume (Kg)": 71229.44,
        "Pre\u00e7o (Kg)": 86.87,
        "Preco_Medio": 86.12
    },
    "CEREAL BARRA NUTRY AVEIA BAN MEL 24X22G": {
        "Vendas $": 6004963.55,
        "Volume (Kg)": 164253.17,
        "Pre\u00e7o (Kg)": 206.04,
        "Preco_Medio": 36.56
    },
    "CEREAL BARRA NUTRY AVEIA BANANA MEL 3X22G": {
        "Vendas $": 5845381.41,
        "Volume (Kg)": 68481.4,
        "Pre\u00e7o (Kg)": 86.96,
        "Preco_Medio": 85.36
    },
    "CEREAL EM BARRA SAUD NUTRY AVELA CHOCOLATE 3X22G": {
        "Vendas $": 5371352.69,
        "Volume (Kg)": 64429.2,
        "Pre\u00e7o (Kg)": 86.47,
        "Preco_Medio": 83.37
    },
    "CEREAL BARRA NUTRY AVELA CHOCOLATE 24X22G": {
        "Vendas $": 5328861.95,
        "Volume (Kg)": 118296.31,
        "Pre\u00e7o (Kg)": 206.35,
        "Preco_Medio": 45.05
    },
    "CEREAL BARRA NUTRY BOLO DE CHOCOLATE 3X22G": {
        "Vendas $": 5254308.55,
        "Volume (Kg)": 64860.71,
        "Pre\u00e7o (Kg)": 85.04,
        "Preco_Medio": 81.01
    },
    "CEREAL BARRA SAUD NUTRY FRUTAS VERMELHAS 22G": {
        "Vendas $": 5159122.29,
        "Volume (Kg)": 66650.64,
        "Pre\u00e7o (Kg)": 91.42,
        "Preco_Medio": 77.41
    },
    "CEREAL EM BARRA PROTEICO NUTRY CRISPY PROTEIN CHOC 30G": {
        "Vendas $": 4521415.87,
        "Volume (Kg)": 25492.21,
        "Pre\u00e7o (Kg)": 188.19,
        "Preco_Medio": 177.36
    },
    "CEREAL BARRA NUTRY CASTANHA CAJU CHOCOLATE 3X22G": {
        "Vendas $": 3585117.59,
        "Volume (Kg)": 43769.35,
        "Pre\u00e7o (Kg)": 85.38,
        "Preco_Medio": 81.91
    },
    "CEREAL EM BARRA PROTEICO NUTRY CRISPY PROTEIN COOKIES 30G": {
        "Vendas $": 3529520.98,
        "Volume (Kg)": 19707.63,
        "Pre\u00e7o (Kg)": 188.26,
        "Preco_Medio": 179.09
    },
    "CEREAL EM BARRA PROTEICO NUTRY CRISPY PROTEIN AMEND 30G": {
        "Vendas $": 3454453.33,
        "Volume (Kg)": 19613.04,
        "Pre\u00e7o (Kg)": 186.16,
        "Preco_Medio": 176.13
    },
    "CEREAL BARRA SAUD NUTRY FRUTAS VERMELHAS 3X22G": {
        "Vendas $": 3234730.36,
        "Volume (Kg)": 40489.48,
        "Pre\u00e7o (Kg)": 87.94,
        "Preco_Medio": 79.89
    },
    "CEREAL BARRA NUTRY FRUTAS VERM 24X22G": {
        "Vendas $": 3038423.83,
        "Volume (Kg)": 76017.22,
        "Pre\u00e7o (Kg)": 240.03,
        "Preco_Medio": 39.97
    },
    "CEREAL BARRA NUTRY CASTANHA CAJU 22G": {
        "Vendas $": 2636538.37,
        "Volume (Kg)": 30536.5,
        "Pre\u00e7o (Kg)": 91.39,
        "Preco_Medio": 86.34
    }
},
  
  share_por_regiao: {
    "CO": {
        "Share_Vendas_%": 38.38,
        "Share_Volume_%": 59.09
    },
    "NE": {
        "Share_Vendas_%": 31.05,
        "Share_Volume_%": 47.71
    },
    "NO": {
        "Share_Vendas_%": 57.38,
        "Share_Volume_%": 71.19
    },
    "SE": {
        "Share_Vendas_%": 36.68,
        "Share_Volume_%": 57.53
    },
    "SU": {
        "Share_Vendas_%": 22.22,
        "Share_Volume_%": 27.82
    }
},
  
  matriz_preco_regiao_categoria: {
    "CO": {
        "BARRA DE CEREAL": 106.75,
        "BARRA DE PROTE\u00cdNA": 198.29
    },
    "NE": {
        "BARRA DE CEREAL": 100.73,
        "BARRA DE PROTE\u00cdNA": 176.31
    },
    "NO": {
        "BARRA DE CEREAL": 105.15,
        "BARRA DE PROTE\u00cdNA": 193.28
    },
    "SE": {
        "BARRA DE CEREAL": 122.03,
        "BARRA DE PROTE\u00cdNA": 182.39
    },
    "SU": {
        "BARRA DE CEREAL": 95.18,
        "BARRA DE PROTE\u00cdNA": 187.42
    }
}
};

// Funções auxiliares
export function getScanntechTotais() {
  return scanntechData.totais;
}

export function getScanntechPorRegiao(regiao = null) {
  if (regiao) {
    return scanntechData.por_regiao[regiao] || null;
  }
  return scanntechData.por_regiao;
}

export function getScanntechPorCategoria(categoria = null) {
  if (categoria) {
    return scanntechData.por_categoria[categoria] || null;
  }
  return scanntechData.por_categoria;
}

export function getScanntechTopSkus(limit = 20) {
  const skus = Object.entries(scanntechData.top_20_skus)
    .map(([nome, dados]) => ({ nome, ...dados }))
    .slice(0, limit);
  return skus;
}

export function getScanntechSharePorRegiao(regiao = null) {
  if (regiao) {
    return scanntechData.share_por_regiao[regiao] || null;
  }
  return scanntechData.share_por_regiao;
}

export function getScanntechMatrizPreco() {
  return scanntechData.matriz_preco_regiao_categoria;
}

// Função para obter mercado total com suporte a filtros de categoria e período
export function getScanntechMercadoTotal(categoria = 'total', periodo = 'mes_yoy') {
  const totais = scanntechData.totais;
  const categorias = scanntechData.por_categoria;
  
  // Mapeamento de categorias do dashboard para categorias dos dados
  const catMap = {
    'total': null, // null significa usar totais gerais
    'cereais': 'BARRA DE CEREAL',
    'frutas': null, // Não temos dados específicos de frutas
    'nuts': null, // Não temos dados específicos de nuts
    'proteina': 'BARRA DE PROTEÍNA'
  };
  
  const categoriaDados = catMap[categoria];
  
  // Se categoria é 'total' ou não mapeada, usar totais gerais
  let dadosAtual, dadosAnterior;
  
  if (!categoriaDados || categoria === 'total') {
    // Usar totais gerais
    dadosAtual = {
      receita: totais.vendas_total,
      volume_kg: totais.volume_total_kg,
      preco_kg: totais.preco_medio_kg
    };
    // Simular dados anteriores (reduzir 18% para YoY)
    dadosAnterior = {
      receita: totais.vendas_total / 1.185,
      volume_kg: totais.volume_total_kg / 1.185,
      preco_kg: totais.preco_medio_kg / 1.005
    };
  } else {
    // Usar dados da categoria específica
    const catDados = categorias[categoriaDados];
    if (catDados) {
      dadosAtual = {
        receita: catDados['Vendas $'],
        volume_kg: catDados['Volume (Kg)'],
        preco_kg: catDados['Preço (Kg)'] || catDados['Preco_Medio']
      };
      // Simular dados anteriores
      dadosAnterior = {
        receita: catDados['Vendas $'] / 1.185,
        volume_kg: catDados['Volume (Kg)'] / 1.185,
        preco_kg: (catDados['Preço (Kg)'] || catDados['Preco_Medio']) / 1.005
      };
    } else {
      // Fallback para totais se categoria não encontrada
      dadosAtual = {
        receita: totais.vendas_total,
        volume_kg: totais.volume_total_kg,
        preco_kg: totais.preco_medio_kg
      };
      dadosAnterior = {
        receita: totais.vendas_total / 1.185,
        volume_kg: totais.volume_total_kg / 1.185,
        preco_kg: totais.preco_medio_kg / 1.005
      };
    }
  }
  
  // Ajustar valores baseado no período
  let fatorPeriodo = 1;
  if (periodo === 'mes_yoy') {
    fatorPeriodo = 1 / 14; // Média mensal (14 meses de dados)
  } else if (periodo === 'trimestre_yoy') {
    fatorPeriodo = 3 / 14; // Média trimestral
  } else if (periodo === 'ytd_yoy') {
    fatorPeriodo = 1; // YTD usa todos os dados
  }
  
  return {
    valor: {
      atual: dadosAtual.receita * fatorPeriodo,
      anterior: dadosAnterior.receita * fatorPeriodo
    },
    volume: {
      atual: dadosAtual.volume_kg * fatorPeriodo,
      anterior: dadosAnterior.volume_kg * fatorPeriodo
    },
    preco: {
      atual: dadosAtual.preco_kg,
      anterior: dadosAnterior.preco_kg
    }
  };
}

// Função para obter resumo geral dos dados Scanntech
export function getScanntechSummary() {
  const totais = scanntechData.totais;
  const shares = scanntechData.share_por_regiao;
  
  // Calcular share médio
  const shareValues = Object.values(shares).map(r => r.Share_Vendas_%);
  const shareMedio = shareValues.reduce((a, b) => a + b, 0) / shareValues.length;
  
  return {
    receitaTotal: totais.vendas_total,
    volumeTotal: totais.volume_total_kg,
    precoMedio: totais.preco_medio_kg,
    shareMedio: shareMedio,
    priceIndexMedio: 100 // Base index
  };
}

// Função para obter marcas por região (dados mockados pois só temos NUTRY)
export function getScanntechMarcasPorRegiao(categoria = 'total', periodo = 'mes_yoy', regiao = 'brasil') {
  const totais = scanntechData.totais;
  const marcas = scanntechData.por_marca;
  
  // Como só temos dados da NUTRY, retornar estrutura compatível
  const marcasArray = Object.entries(marcas).map(([nome, dados]) => {
    return {
      marca: nome,
      receita: dados['Vendas $'],
      volume: dados['Volume (Kg)'],
      share_valor: 100, // NUTRY é 100% dos dados que temos
      share_volume: 100,
      preco_medio: dados['Preco_Medio']
    };
  });
  
  return marcasArray;
}

// Função para obter marcas por região com comparativo (compatibilidade com App.jsx)
export function getScanntechMarcasRegiaoComparativo(categoria = 'total', periodo = 'mes_yoy') {
  const totais = scanntechData.totais;
  const marcas = scanntechData.por_marca;
  
  // Mapeamento de categorias
  const catMap = {
    'total': null,
    'cereais': 'BARRA DE CEREAL',
    'frutas': null,
    'nuts': null,
    'proteina': 'BARRA DE PROTEÍNA'
  };
  
  const categoriaDados = catMap[categoria];
  
  // Fatores de ajuste por período
  const fatorMap = {
    'mes_yoy': { atual: 1/14, anterior: 1/14 },
    'trimestre_yoy': { atual: 3/14, anterior: 3/14 },
    'ytd_yoy': { atual: 1, anterior: 1 }
  };
  
  const fatores = fatorMap[periodo] || fatorMap['mes_yoy'];
  
  // Estrutura de retorno compativel com o componente
  const resultado = {
    brasil: []
  };
  
  // Como só temos dados da NUTRY, criar estrutura para ela
  Object.entries(marcas).forEach(([nome, dados]) => {
    let receita_atual, volume_atual;
    
    if (categoriaDados && scanntechData.por_categoria[categoriaDados]) {
      // Usar dados da categoria específica
      const catDados = scanntechData.por_categoria[categoriaDados];
      receita_atual = catDados['Vendas $'] * fatores.atual;
      volume_atual = catDados['Volume (Kg)'] * fatores.atual;
    } else {
      // Usar totais
      receita_atual = dados['Vendas $'] * fatores.atual;
      volume_atual = dados['Volume (Kg)'] * fatores.atual;
    }
    
    const receita_anterior = receita_atual / 1.185;
    const volume_anterior = volume_atual / 1.185;
    
    resultado.brasil.push({
      MARCA: nome,
      RECEITA_MIL: receita_atual / 1000, // Converter para milhares
      VOLUME_UN: volume_atual,
      SHARE_VALOR: 100, // NUTRY é 100% dos nossos dados
      SHARE_VOLUME: 100,
      PRECO_MEDIO: dados['Preco_Medio'],
      RECEITA_ANTERIOR_MIL: receita_anterior / 1000,
      VOLUME_ANTERIOR: volume_anterior,
      SHARE_VALOR_ANTERIOR: 100,
      SHARE_VOLUME_ANTERIOR: 100,
      PRECO_MEDIO_ANTERIOR: dados['Preco_Medio'] / 1.005
    });
  });
  
  return resultado;
}

export default scanntechData;
